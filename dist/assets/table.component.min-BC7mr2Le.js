/*!
  * iamKey v5.5.0
  * Copyright 2022-2024 iamproperty
  */const W=function(r){return typeof r!="string"?!1:!isNaN(r)&&!isNaN(parseFloat(r))},X=(r,t)=>String(r).padStart(t,"0"),Y=r=>r.charAt(0).toUpperCase()+r.slice(1),k=(r,t,i)=>t.split(/[\.\[\]\'\"]/).filter(o=>o).reduce((o,u)=>o?o[u]:i,r);var J=function(r,t,i,o){function u(n){return n instanceof i?n:new i(function(a){a(n)})}return new(i||(i=Promise))(function(n,a){function l(h){try{e(o.next(h))}catch(b){a(b)}}function d(h){try{e(o.throw(h))}catch(b){a(b)}}function e(h){h.done?n(h.value):u(h.value).then(l,d)}e((o=o.apply(r,t||[])).next())})};const F=r=>{const t=Array.from(r.querySelectorAll("thead th"));Array.from(r.querySelectorAll("tbody tr")).forEach((i,o)=>{const u=Array.from(i.querySelectorAll("th, td")),n=["0","low","medium","high","unknown","n/a","pending","verified","due","overdue","incomplete","complete","completed","approval required","upcoming","requires approval","to do","on track","not started","warning","error"];u.forEach((a,l)=>{const d=t[l];if(typeof d<"u"){let e=document.createElement("div");e.innerHTML=d.innerHTML;let h=e.textContent||e.innerText||"";a.setAttribute("data-label",h),d.hasAttribute("data-td-class")&&a.setAttribute("class",d.getAttribute("data-td-class")),d.hasAttribute("data-format")&&(a.setAttribute("data-format",d.getAttribute("data-format")),a.innerHTML=j(d.getAttribute("data-format"),a.textContent.trim())),n.includes(a.textContent.trim().toLowerCase())&&a.setAttribute("data-content",a.textContent.trim().toLowerCase())}})})},G=r=>{let t=0;return Array.from(r.querySelectorAll("tbody tr")).forEach((i,o)=>{let u=window.getComputedStyle(document.querySelector("html")),n=i.querySelector(":scope > *:last-child > *:first-child");if(n){n.classList.add("text-nowrap");let a=n.offsetWidth/parseFloat(u.fontSize);a+=1.7,t=t>a?t:a}}),t},K=(r,t)=>{if(t.classList.contains("table--fullwidth")&&!t.hasAttribute("data-expandable")||r.querySelectorAll("thead tr th").length<4&&!t.hasAttribute("data-expandable"))return!1;Array.from(r.querySelectorAll("thead tr")).forEach((i,o)=>{r.querySelectorAll("thead tr th.expand-button-heading").length||i.insertAdjacentHTML("afterbegin",'<th class="th--fixed expand-button-heading"></th>')}),Array.from(r.querySelectorAll("tbody tr")).forEach((i,o)=>{const u=i.getAttribute("data-view")==="full"?"aria-expanded":"";i.insertAdjacentHTML("afterbegin",`<td class="td--fixed td--expand"><button class="btn btn-compact btn-secondary" data-expand-button ${u}>Expand</button></td>`)})},Q=r=>{r.addEventListener("click",t=>{if(t&&t.target instanceof HTMLElement&&t.target.closest("[data-expand-button]")){let i=t.target.closest("[data-expand-button]"),o=i.closest("tr");i.toggleAttribute("aria-expanded"),o.getAttribute("data-view")=="full"?o.setAttribute("data-view","default"):o.setAttribute("data-view","full"),i.blur()}})},R=(r,t)=>{let i=t.querySelector("[data-search]");if(!i)return!1;const o=i.getAttribute("id"),u=i.getAttribute("data-search").split(",");let n=i.parentNode,a={};u.forEach((l,d)=>{Array.from(r.querySelectorAll('td[data-label="'+l.trim()+'"]')).forEach((e,h)=>{e.querySelector(".td__content")?a[e.querySelector(".td__content").textContent]=e.querySelector(".td__content").textContent:a[e.textContent]=e.textContent})}),i.setAttribute("list",`${o}_list`),i.setAttribute("autocomplete","off"),n.querySelector("datalist")||(n.innerHTML+=`<datalist id="${o}_list"></datalist>`),n.querySelector("datalist").innerHTML=`${Object.keys(a).map(l=>`<option value="${l}"></option>`).join("")}`},V=(r,t,i,o,u)=>{var n;let a=function(e,h=!1){if(t.classList.contains("processing"))return!1;if(e.type=="submit"&&(t.classList.add("processing"),Array.from(t.querySelectorAll("[data-duplicate]")).forEach((b,c)=>{const m=b.getAttribute("data-duplicate"),s=document.getElementById(m),g=document.querySelector(`[for="${m}"] iam-card`);if(s.checked!=b.checked)if(g){let v=new Event("click");g.dispatchEvent(v)}else s.checked=b.checked}),t.classList.remove("processing")),t.hasAttribute("data-ajax")){if(!h){let b=t.querySelector("[data-pagination]");b.value=1,o.setAttribute("data-page",1)}z(r,t,i,o)}else t.hasAttribute("data-submit")?t.submit():(M(r,t,o),H(r,t));if(t.hasAttribute("data-ajax-post")){let b=new FormData(t),c=new URLSearchParams(b).toString();const m=new XMLHttpRequest;m.open("GET",`${window.location.href}?ajax=true&${c}`),m.send()}};t.addEventListener("keyup",e=>{clearTimeout(n),e&&e.target instanceof HTMLElement&&e.target.closest("[data-search]")&&(n=setTimeout(function(){a(e)},500))}),t.addEventListener("change",e=>{clearTimeout(n),e&&e.target instanceof HTMLElement&&e.target.closest("[data-sort]")&&(t.hasAttribute("data-submit")||D(r,t,u),a(e)),e&&e.target instanceof HTMLElement&&e.target.closest("[data-search]")&&a(e),e&&e.target instanceof HTMLElement&&e.target.closest("[data-filter][data-no-ajax]")?(M(r,t,o),H(r,t)):(e&&e.target instanceof HTMLElement&&e.target.closest("[data-filter]")&&e.target.closest("form .dialog__wrapper > dialog")||e&&e.target instanceof HTMLElement&&e.target.closest("[data-filter]")&&!e.target.closest("form dialog"))&&a(e),e&&e.target instanceof HTMLElement&&e.target.closest("[data-show]")&&a(e),e&&e.target instanceof HTMLElement&&e.target.closest("[data-mimic]")&&a(e)}),t.addEventListener("click",e=>{if(clearTimeout(n),e&&e.target instanceof HTMLElement&&e.target.closest('dialog button:not([type="button"])')&&e.target.closest('dialog button:not([type="button"])').closest("dialog").close(),e&&e.target instanceof HTMLElement&&e.target.closest(".dialog__close")&&(e.preventDefault(),e.stopPropagation()),e&&e.target instanceof HTMLElement&&e.target.closest("[data-clear]")){t.classList.add("processing"),Array.from(t.querySelectorAll(".applied-filters")).forEach((b,c)=>{b.innerHTML=""});let h=t.elements;for(let b=0;b<h.length;b++)switch(h[b].type.toLowerCase()?h[b].type.toLowerCase():"text"){case"text":case"password":case"textarea":h[b].value="";break;case"radio":case"checkbox":if(h[b].checked){let c=h[b],m=c.getAttribute("id"),s=document.querySelector(`[for="${m}"`);if(s.querySelector("iam-card")){let g=s.querySelector("iam-card"),v=new Event("click");g.dispatchEvent(v)}c.checked=!1}break;case"select-one":case"select-multi":h[b].selectedIndex=-1;break}t.classList.remove("processing"),t.hasAttribute("data-submit")||D(r,t,u),a(e)}}),t.addEventListener("submit",e=>{clearTimeout(n),t.hasAttribute("data-submit")||e.preventDefault(),a(e)}),t.addEventListener("force",e=>{a(e)}),t.addEventListener("paginate",e=>{a(e,!0)});let l=[],d=[];Array.from(t.querySelectorAll("[data-mimic]")).forEach((e,h)=>{let b=e.getAttribute("data-mimic");Array.from(document.querySelectorAll(`[name="${b}"]`)).forEach((c,m)=>{let s=c.closest("form");l.includes(s)||l.push(s),d.includes(b)||d.push(b)})}),l.forEach((e,h)=>{const b=function(){let c=[],m=new FormData(e);for(const[s,g]of m)document.querySelector(`[data-mimic="${s}"]`)&&!c.includes(s)?(c.push(s),document.querySelector(`[data-mimic="${s}"]`).value=g):document.querySelector(`[data-mimic="${s}"]`)&&(document.querySelector(`[data-mimic="${s}"]`).value+=","+g);for(const s of c){const g=new Event("force");t.dispatchEvent(g)}for(const s of d)if(!m.has(s)&&e.querySelector(`[name="${s}"]`)){document.querySelector(`[data-mimic="${s}"]`).value="";const g=new Event("force");t.dispatchEvent(g)}};e.addEventListener("force",c=>{b()}),e.addEventListener("change",c=>{b()})})},D=(r,t,i)=>{if(t.getAttribute("data-ajax"))return!1;let o=r.querySelector("tbody"),u=t.querySelector("[data-sort]"),n=u.querySelector(`option:nth-child(${u.selectedIndex+1})`),a=n.getAttribute("data-sort"),l=n.getAttribute("data-order"),d=n.getAttribute("data-format");if(!a)return o.innerHTML=i.innerHTML,F(r),!1;let e=[];["asc","desc","descending"].includes(l)||(e=l.split(","));let h=[];Array.from(o.querySelectorAll("tr")).forEach((c,m)=>{let s=c.querySelector('td[data-label="'+a+'"], th[data-label="'+a+'"]').textContent.trim();c.querySelector('[data-label="'+a+'"] .td__content')&&(s=c.querySelector('[data-label="'+a+'"] .td__content').textContent.trim()),e.length&&e.includes(s)&&(s=e.indexOf(s)),W(s)&&(s=X(s,10)),d&&d=="date"&&(s=new Date(s));const g={index:s,row:c};h.push(g)}),h.sort((c,m)=>c.index>m.index?1:-1),(l=="descending"||l=="desc")&&(h=h.reverse());let b="";h.forEach((c,m)=>{b+=c.row.outerHTML}),o.innerHTML=b},M=(r,t,i)=>{r.classList.remove("table--filtered");let o=O(t),u=[],n=0,a=t.querySelector("[data-pagination]")?parseInt(t.querySelector("[data-pagination]").value):1,l=t.querySelector("[data-show]")?parseInt(t.querySelector("[data-show]").value):15;if(Array.from(r.querySelectorAll("tbody tr")).forEach((e,h)=>{e.classList.remove("filtered"),e.classList.remove("filtered--matched"),e.classList.remove("filtered--show"),e.removeAttribute("data-filtered-by")}),t.querySelector("[data-search]")){let e=t.querySelector("[data-search]");t.querySelector("[data-search]").getAttribute("data-search").split(",").forEach((h,b)=>{u.push({column:`${h.trim()}`,value:`${e.value}`})})}Array.from(t.querySelectorAll("[data-filter-count]")).forEach((e,h)=>{e.innerHTML="",e.parentNode.classList.remove("hover")});let d=0;Object.values(o).forEach((e,h)=>{typeof e=="object"&&Object.values(e).length?d+=Object.values(e).length:d++}),d&&Array.from(t.querySelectorAll("[data-filter-count]")).forEach((e,h)=>{e.innerHTML+=`(${d})`,e.parentNode.classList.add("hover")}),r.classList.add("table--filtered");for(const[e,h]of Object.entries(o))Array.from(r.querySelectorAll("tbody tr:not(.filtered)")).forEach((b,c)=>{let m=!1;h.forEach((s,g)=>{let v=b.querySelector(`[data-label="${e}"]`);if(s&&s=="$today")s=j("date",new Date);else if(s&&s=="$yesterday"){let f=new Date;f.setDate(f.getDate()-1),s=j("date",f)}else if(s&&(s=="$thisWeek"||s=="$lastWeek")){let f=new Date,w=new Date(f.setDate(f.getDate()-(f.getDay()-1))),p=new Date(f.setDate(f.getDate()-f.getDay()+7)),y=new Date(v.textContent.toLowerCase());if(f.setHours(0,0,0,0),w.setHours(0,0,0,0),p.setHours(0,0,0,0),y.setHours(0,0,0,0),s=="$thisWeek")m=y>=w&&y<=p;else{let x=new Date(w.setDate(w.getDate()-7)),L=new Date(p.setDate(p.getDate()-7));x.setHours(0,0,0,0),L.setHours(0,0,0,0),m=y>=x&&y<=L}}else if(s&&s=="$thisMonth"){let f=new Date,w=f.getFullYear(),p=f.getMonth();var q=new Date(w,p,1),S=new Date(w,p+1,0);let y=new Date(v.textContent.toLowerCase());q.setHours(0,0,0,0),S.setHours(0,0,0,0),y.setHours(0,0,0,0),m=y>=q&&y<=S}else if(s&&s=="$lastMonth"){let f=new Date,w=f.getFullYear(),p=f.getMonth();var E=new Date(w,p-1,1),A=new Date(w,p,0);let y=new Date(v.textContent.toLowerCase());E.setHours(0,0,0,0),A.setHours(0,0,0,0),y.setHours(0,0,0,0),m=y>=E&&y<=A}v&&v.textContent.toLowerCase().includes(s.toLowerCase())&&(m=!0)}),m||(b.classList.add("filtered"),b.setAttribute("data-filtered-by",e))});Array.from(r.querySelectorAll("tbody tr:not(.filtered)")).forEach((e,h)=>{let b=!(u.length>0&&u[0].value.length>=3);u.forEach((c,m)=>{let s=e.querySelector(`[data-label="${c.column}"]`);s&&c.value.length>=3&&s.textContent.toLowerCase().includes(c.value.toLowerCase())&&(b=!0)}),b||e.classList.add("filtered")}),Array.from(r.querySelectorAll("tbody tr:not(.filtered")).forEach((e,h)=>{n++,e.classList.add("filtered--matched"),Math.ceil(n/l)==parseInt(a)&&e.classList.add("filtered--show")}),i&&(i.setAttribute("data-total",n),i.setAttribute("data-show",l),i.setAttribute("data-page",a))},H=(r,t,i)=>{Array.from(t.querySelectorAll("[data-query]")).forEach((o,u)=>{let n=o.getAttribute("data-query"),a=0;if(n=="total")i.hasAttribute("data-total")?a=i.getAttribute("data-total"):a=(r.classList.contains("table--filtered"),r.querySelectorAll("tbody tr").length);else if(!n.includes(" == ")&&n.includes(" & ")){let l=n.split(" & "),d="";l.forEach(e=>{d+=`:not([data-filtered-by="${e}"])`}),a=Array.from(r.querySelectorAll(`tbody tr${d}`)).length}else if(!n.includes(" == "))a=Array.from(r.querySelectorAll(`tbody tr:not([data-filtered-by="${n}"])`)).length;else if(n.includes(" && ")){let l=n.split(" && ");a=Array.from(r.querySelectorAll("tbody tr:not(.filtered)")).filter(function(d){let e=!0;for(const[h,b]of Object.entries(l)){let c=b.split(" == ");(!d.querySelector(`td[data-label="${c[0]}"]`)||d.querySelector(`td[data-label="${c[0]}"]`).textContent!=`${c[1]}`)&&(e=!1)}return e}).length}else{let l=n.split(" == ");a=Array.from(r.querySelectorAll(`tbody tr.filtered--matched td[data-label="${l[0]}"], tbody tr[data-filtered-by="${l[0]}"] td[data-label="${l[0]}"]`)).filter(function(d){return d.textContent===l[1]}).length}o.hasAttribute("data-total")?o.setAttribute("data-total",a):o.innerHTML=a})},Z=function(r,t,i,o){i.addEventListener("update-page",u=>{let n=t.querySelector("[data-pagination]"),a=u.detail.page;if(n.value=a,t.dispatchEvent(new Event("paginate")),o.setAttribute("data-page",a),r.hasAttribute("data-show-history")){const l=new URL(location);l.searchParams.set("page",a),history.pushState({type:"pagination",form:t.getAttribute("id"),page:a},"",l)}if(!o.hasAttribute("data-no-scroll")){const l=r.getBoundingClientRect().top+window.pageYOffset+-250;window.scrollTo({top:l,behavior:"smooth"})}}),i.addEventListener("update-show",u=>{let n=t.querySelector("[data-show]"),a=u.detail.show;n.value=a,o.setAttribute("data-show",a),t.dispatchEvent(new Event("submit"))})},tt=(r,t)=>{if(!r)return!1;r.addEventListener("click",i=>{et(t)})},et=function(r){for(var t=[],i=r.getElementsByTagName("tr"),o=0;o<i.length;o++){for(var u=i[o].querySelectorAll("td,th"),n=[],a=0;a<u.length;a++)n.push(`"${u[a].textContent}"`);t.push(n.join(","))}t=t.join(`
`);let l=new Blob([t],{type:"text/csv"});var d=document.createElement("a");d.download="export.csv";var e=window.URL.createObjectURL(l);d.href=e,d.style.display="none",document.body.appendChild(d),d.click(),document.body.removeChild(d)},N=function(r,t,i,o){if(F(r),K(r,o),H(r,t,o),o&&o.classList.contains("table--cta")){let u=function(){Array.from(r.querySelectorAll("tr")).forEach((a,l)=>{let d=a.offsetHeight;a.style.setProperty("--row-height",`${d}px`)})};const n=G(r);o.style.setProperty("--cta-width",`${n}rem`),new ResizeObserver(u).observe(r)}},O=function(r){let t=new Object;return Array.from(r.querySelectorAll("[data-filter]")).forEach((i,o)=>{if(!(i.type=="radio"&&!i.checked)&&!(i.type=="checkbox"&&!i.checked)&&i&&i.value){let u=i.getAttribute("data-filter");t[u]||(t[u]=new Array),t[u].push(i.value)}}),t},z=function(r,t,i,o){return J(this,void 0,void 0,function*(){let u=new FormData(t),n=new URLSearchParams(u).toString(),a=r.querySelectorAll("thead tr th:not(.expand-button-heading)"),l=r.querySelector("tbody"),d=t.getAttribute("data-ajax");o.classList.add("table--loading");let e=O(t);Array.from(t.querySelectorAll("[data-filter-count]")).forEach((c,m)=>{c.innerHTML="",c.parentNode.classList.remove("hover")});let h=0;Object.values(e).forEach((c,m)=>{typeof c=="object"&&Object.values(c).length?h+=Object.values(c).length:h++}),h&&Array.from(t.querySelectorAll("[data-filter-count]")).forEach((c,m)=>{c.innerHTML+=`(${h})`,c.parentNode.classList.add("hover")}),window.controller||(window.controller=[]),window.controller[d]&&window.controller[d].abort(),window.controller[d]=new AbortController;const{signal:b}=controller[d];i.setAttribute("data-loading","true"),t.classList.add("processing");try{yield fetch(d+"?"+n,{signal:b,method:"get",credentials:"same-origin",headers:new Headers({"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"})}).then(c=>c.json()).then(c=>{let m=t.hasAttribute("data-schema")?t.getAttribute("data-schema"):"data",s=t.hasAttribute("data-schema-total")?t.getAttribute("data-schema-total"):"meta.total",g=t.hasAttribute("data-schema-page")?t.getAttribute("data-schema-page"):"meta.current_page",v=k(c,s,15),q=k(c,g,1),S=k(c,m),E=o.hasAttribute("data-empty-msg")?o.getAttribute("data-empty-msg"):"No results found";S?(l.innerHTML="",S.forEach((A,f)=>{var w=document.createElement("tr");a.forEach((p,y)=>{let x="";var L=document.createElement("td");if(L.setAttribute("data-label",p.innerText),p.getAttribute("data-output")){var _=p.getAttribute("data-output");x=_.replace(new RegExp(/{(.*?)}/,"gm"),function(P){return k(A,P.replace("{","").replace("}",""))})}if(p.hasAttribute("data-output-array")){var _=p.getAttribute("data-output");let I=k(A,_.replace("{","").replace("}",""));x="",I.forEach((C,at)=>{let U=p.getAttribute("data-output-array"),$="";if(p.hasAttribute("data-output-array-property")&&p.hasAttribute("data-output-array-transform")){const T=k(C,p.getAttribute("data-output-array-property")),B=JSON.parse(p.getAttribute("data-output-array-transform"))[T];$=U.replace(`{${p.getAttribute("data-output-array-property")}}`,B)}$=$.replace(new RegExp(/{(.*?)}/,"gm"),function(T){return k(C,T.replace("{","").replace("}",""))}),x+=$})}p.hasAttribute("data-transform")&&(x=JSON.parse(p.getAttribute("data-transform"))[x],!x&&p.hasAttribute("data-default")&&(x=p.getAttribute("data-default"))),L.innerHTML=x,w.appendChild(L)}),l.appendChild(w)}),R(r,t),o.setAttribute("data-total",parseInt(v)),o.setAttribute("data-page",parseInt(q)),N(r,t,i,o),Array.from(t.querySelectorAll("[data-ajax-query]")).forEach((A,f)=>{let w=k(c,A.getAttribute("data-ajax-query"),"");A.hasAttribute("data-total")?A.setAttribute("data-total",w):A.innerHTML=w}),parseInt(v)==0&&(l.innerHTML=`<tr><td colspan="100%"><span>${E}</span></td></tr>`),o.classList.remove("table--loading"),window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"Ajax table loaded",url:d,formData:n})):l.innerHTML='<tr><td colspan="100%"><span>Error loading table</span></td></tr>',i.removeAttribute("data-loading"),t.classList.remove("processing")})}catch(c){console.log(c)}})},j=(r,t)=>{switch(r){case"datetime":return new Date(t).toLocaleDateString("en-gb",{weekday:"short",year:"2-digit",month:"long",day:"numeric"})+" "+new Date(t).toLocaleTimeString("en-gb",{hour:"2-digit",minute:"2-digit"});case"date":return new Date(t).toLocaleDateString("en-gb",{year:"2-digit",month:"long",day:"numeric"});case"capitalise":return t=Y(t)}};class rt extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"});const t=document.body.hasAttribute("data-assets-location")?document.body.getAttribute("data-assets-location"):"/assets",i=document.body.hasAttribute("data-core-css")?document.body.getAttribute("data-core-css"):`${t}/css/core.min.css`,o=document.createElement("template");o.innerHTML=`
    <style>
    @import "${i}";
    :host{--wrapper-padding: 2rem;--bg-colour: #ffffff;display:block;background:#fff;padding:var(--wrapper-padding);box-shadow:0px 6px 12px rgba(0,0,0,.11);border-radius:0.625rem;margin-bottom:2rem;overflow:hidden}:host:before{display:none !important}@media screen and (prefers-color-scheme: dark){:host{background:var(--colour-canvas-2)}}@media(forced-colors: active){:host{--wrapper-padding: 0;background:var(--colour-canvas-2)}}::slotted(table){margin-bottom:0 !important}.table__wrapper{display:block;width:100%;overflow-x:auto;-webkit-overflow-scrolling:touch;-ms-overflow-style:-ms-autohiding-scrollbar}@container (width < 23.4375em){:host(:not(.table--fullwidth)){margin-left:-1.5rem;margin-right:-1.5rem;margin-bottom:0;background:var(--colour-canvas-2);border-radius:0;background:none;padding:0;box-shadow:none;overflow:visible}:host(:not(.table--fullwidth)) .table__wrapper:not(.table--fullwidth){overflow:hidden;max-height:none !important}:host(:not(.table--fullwidth)) ::slotted(table){overflow:visible !important;margin-inline:1.5rem;margin-bottom:1.5rem !important;width:calc(100% - 3rem) !important;display:block}:host(:not(.table--fullwidth)) .table--cta{border-bottom:0}:host(:not(.table--fullwidth)) .table--cta:after{content:none;display:none !important}}@container (width > 23.4375em){:host{--cta-width: 8rem}:host(.table--loading){--cta-width: 1.5rem!important}.table--cta{position:relative}.table--cta .table__wrapper{overflow-y:hidden;margin-bottom:0}}.table__wrapper:is(.mh-sm,.mh-md,.mh-lg){position:relative}.table__wrapper:is(.mh-sm,.mh-md,.mh-lg)::before{top:calc(100% - 1.2rem);bottom:2px;height:1.2rem;border-bottom:2px solid var(--colour-border);margin-bottom:-1.2rem}.table--cta>.table__wrapper:is(.mh-sm,.mh-md,.mh-lg){max-height:none;position:static}.table--cta>.table__wrapper:is(.mh-sm,.mh-md,.mh-lg)::before{display:none}@container (width < 23.4375em){.table__wrapper.has-actionbar{margin-top:calc(-100vh + 6.75rem) !important}}:host(.table--loading){pointer-events:none;position:relative}:host(.table--loading) ::slotted(table){min-height:20rem;opacity:.5}:host(.table--loading)::after{content:"Loading...";position:absolute;top:6.25rem;left:50%;transform:translate(-50%, 0);font-weight:bold;color:var(--colour-heading);font-size:1.5rem;text-shadow:0px 0px 10px var(--colour-canvas-2);padding-inline:2rem;text-shadow:0px 0px 10px var(--colour-canvas-2);background:radial-gradient(var(--colour-canvas-2), transparent)}@container (width < 23.4375em){.pagination--table{margin-inline:1.5rem;width:auto}:host(.table--fullwidth) .pagination--table{margin-inline:0}}/*# sourceMappingURL=assets/css/components/table.css.map */


    :host(.mh-sm){
      max-height: none!important;
    }
    :host(.mh-md){
      max-height: none!important;
    }
    :host(.mh-lg){
      max-height: none!important;
    }
    
    ${this.hasAttribute("css")?`@import "${this.getAttribute("css")}";`:""}
    </style>
    <slot name="before"></slot>
    <div class="table--cta">
    <div class="table__wrapper">
      <slot></slot>
    </div>
    </div>
    <iam-pagination class="pagination--table" ${this.hasAttribute("data-page")?`data-page="${this.getAttribute("data-page")}"`:""} ></iam-pagination>
    `,this.shadowRoot.appendChild(o.content.cloneNode(!0)),document.getElementById("tableExtras")||document.head.insertAdjacentHTML("beforeend",`<style id="tableExtras">*:has(>iam-table){container-type:inline-size}iam-table{--hover-background: var(--colour-light);--row-bg: var(--colour-canvas-2)}iam-table thead tr{background:var(--row-bg)}iam-table tbody tr{background:var(--row-bg)}iam-table tbody tr:is(:hover,:focus-within,.hover){--bg-colour-rgb: 238,238,238;--row-bg: var(--hover-background);background:var(--row-bg)}@media screen and (prefers-color-scheme: dark){iam-table tbody tr{--hover-background: var(--colour-canvas)}iam-table tbody tr:is(:hover,:focus-within,.hover){background:var(--row-bg)}}iam-table[data-expandable] [data-expand-button][aria-expanded]{background-color:rgba(0,0,0,0)}@container (width < 23.4375em){iam-table:not(.table--fullwidth) thead{display:none}iam-table:not(.table--fullwidth) tbody{display:block;overflow:visible}iam-table:not(.table--fullwidth) tbody tr td:first-child{padding-top:0}iam-table:not(.table--fullwidth) tr{display:block;position:relative;border:none;background:var(--row-bg);padding:var(--wrapper-padding);box-shadow:0px 6px 12px rgba(0,0,0,.11);border-radius:0.5rem;height:auto}iam-table:not(.table--fullwidth) tr+tr{margin-top:2rem}iam-table:not(.table--fullwidth) tr:is(:hover,:focus,.hover){--row-bg: var(--colour-canvas-2)}iam-table:not(.table--fullwidth) :is(td,th){display:block;border-color:var(--colour-border);padding-right:0}iam-table:not(.table--fullwidth) :is(td,th):nth-child(1){border-top:none}iam-table:not(.table--fullwidth) :is(td,th)[data-label]:not([data-label=""]):before{content:attr(data-label);color:var(--colour-heading);padding:0 0 0.375rem 0;margin-bottom:0;display:block;font-weight:bold}iam-table:not(.table--fullwidth) td:first-child::after{top:1.75rem !important}iam-table:not(.table--fullwidth) td::after{top:2.5rem}iam-table:not(.table--fullwidth) .td--fixed{padding-right:50%}iam-table:not(.table--fullwidth) tbody tr td:not(:first-child){border-top:var(--border-width) solid currentColor;border-color:var(--colour-border) !important}iam-table:not(.table--fullwidth) tr:not([data-view=full]) td p{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden}iam-table:not(.table--fullwidth) td:has([data-expand-button]){height:0;padding:0;position:relative}iam-table:not(.table--fullwidth) td:has([data-expand-button])+td{border-top:none !important;padding-top:0 !important}iam-table:not(.table--fullwidth) [data-expand-button]{top:0;right:0;background:rgba(0,0,0,0) !important;border:none;position:absolute;overflow:hidden;--compact-size: 2rem}iam-table:not(.table--fullwidth) [data-expand-button]:before{font-family:"Font Awesome 6 Pro";content:"";font-weight:300 !important;font-size:1.75rem;line-height:var(--compact-size) !important}iam-table:not(.table--fullwidth) [data-expand-button][aria-expanded]:before{content:"";font-weight:900 !important}iam-table:not(.table--fullwidth) .dialog__wrapper:not([slot=overflow]){margin-top:-0.5rem;margin-left:-1rem;z-index:10}iam-table:not(.table--fullwidth) tbody tr:not([data-view=full]) td:not(.td--fixed)+td:not(.td--fixed)+td+td{display:none}iam-table.table--cta:not(.table--fullwidth) tr td:not(:first-child):last-child{display:block !important;position:static;width:100%;min-width:100%;margin-left:0;padding-left:0;text-align:left;min-height:0}iam-table.table--cta:not(.table--fullwidth) tr td:not(:first-child):last-child:after{display:none}}@container (width > 23.4375em){iam-table.table--cta:not(.table--loading):has(tr:first-child td:first-child:last-child){padding-right:calc(var(--wrapper-padding) + 1.5rem)}iam-table.table--cta:not(.table--loading):not(:has(tr:first-child td:first-child:last-child)) tr>th:nth-last-child(2),iam-table.table--cta:not(.table--loading):not(:has(tr:first-child td:first-child:last-child)) tr>td:nth-last-child(2){padding-right:var(--cta-width)}iam-table.table--cta:not(.table--loading):not(:has(tr:first-child td:first-child:last-child)) tr>*:not(:first-child):last-child{position:absolute;left:calc(100% - var(--cta-width));top:auto;background:rgba(0,0,0,0);width:var(--cta-width);min-height:calc(var(--row-height) - 2px);text-align:right;background:linear-gradient(90deg, transparent 0%, var(--row-bg) 1.25rem);cursor:default;padding-bottom:0}@media screen and (prefers-color-scheme: dark){iam-table.table--cta:not(.table--loading):not(:has(tr:first-child td:first-child:last-child)) tr>*:not(:first-child):last-child{background:linear-gradient(90deg, transparent 0%, var(--row-bg) 1.25rem)}}iam-table.table--cta:not(.table--loading):not(:has(tr:first-child td:first-child:last-child)) tr>*:not(:first-child):last-child a{white-space:nowrap;padding-right:.2rem;padding-bottom:0}iam-table.table--cta:not(.table--loading):not(:has(tr:first-child td:first-child:last-child)) tbody tr:hover>*:not(:first-child):last-child{background:linear-gradient(90deg, transparent 0%, var(--row-bg) 1.25rem)}}iam-table:is(.mh-sm,.mh-md,.mh-lg):not(.table--cta){position:relative}iam-table:is(.mh-sm,.mh-md,.mh-lg):not(.table--cta) thead{position:sticky;top:0;left:0;z-index:1;background-color:var(--row-bg)}iam-table:is(.mh-sm,.mh-md,.mh-lg):not(.table--cta) thead:before{content:"";position:absolute;bottom:0;left:0;width:100%;height:2px;background:var(--colour-primary)}iam-table:is(.mh-sm,.mh-md,.mh-lg):not(.table--cta) tbody{position:relative}iam-table:is(.mh-sm,.mh-md,.mh-lg):not(.table--cta) tbody tr:first-child td{border-top:0}iam-table:is(.mh-sm,.mh-md,.mh-lg):not(.table--cta) tbody tr:last-child td{border-bottom:0}table .hide-status:after{display:none}table :not(.hide-status):is([data-content=low],[data-content=medium],[data-content=high],[data-content=unknown],[data-content=due],[data-content=overdue],[data-content=incomplete],[data-content="requires approval"],[data-content=upcoming],[data-content="approval required"],[data-content=warning],[data-content=verified],[data-content="not started"],[data-content="to do"],[data-content="on track"],[data-content=completed],[data-content=complete],.alert-status:not([data-content="0"]):not([data-content=""]):not(:empty)){position:relative;padding-left:1.5rem}table :not(.hide-status):is([data-content=low],[data-content=medium],[data-content=high],[data-content=unknown],[data-content=due],[data-content=overdue],[data-content=incomplete],[data-content="requires approval"],[data-content=upcoming],[data-content="approval required"],[data-content=warning],[data-content=verified],[data-content="not started"],[data-content="to do"],[data-content="on track"],[data-content=completed],[data-content=complete],.alert-status:not([data-content="0"]):not([data-content=""]):not(:empty))::before{margin-left:-1.5rem !important}table :not(.hide-status):is([data-content=low],[data-content=medium],[data-content=high],[data-content=unknown],[data-content=due],[data-content=overdue],[data-content=incomplete],[data-content="requires approval"],[data-content=upcoming],[data-content="approval required"],[data-content=warning],[data-content=verified],[data-content="not started"],[data-content="to do"],[data-content="on track"],[data-content=completed],[data-content=complete],.alert-status:not([data-content="0"]):not([data-content=""]):not(:empty)):after{font-family:"Font Awesome 6 Pro";position:absolute;top:1rem;left:0;font-size:1rem;line-height:1;height:1rem;width:1rem;display:inline-block}table [data-content=high]:after{content:"";font-weight:normal;color:var(--colour-danger)}table [data-content=medium]:after{content:"";font-weight:normal;color:var(--colour-warning)}table [data-content=low]:after{content:"";font-weight:normal;color:var(--colour-complete)}table [data-content=unknown]:after{content:"";font-weight:normal;color:var(--colour-muted)}table :is([data-content=overdue],[data-content=due],[data-content=incomplete]):after{content:"";color:var(--colour-danger)}table :is([data-content="not started"],[data-content="to do"],[data-content="on track"]):after{content:"";color:var(--colour-muted)}table :is([data-content="requires approval"],[data-content="approval required"],[data-content="action required"],[data-content=upcoming]):after{content:"";color:var(--colour-warning)}table :is([data-content=warning]):after{content:"";color:var(--colour-warning)}table :is([data-content="manually verified"],[data-content=verified],[data-content=completed],[data-content=complete]):after{content:"";font-weight:normal;color:var(--colour-complete)}table .alert-status:not([data-content="0"]):not([data-content=""]):not(:empty):after{content:"";color:var(--colour-primary)}iam-table .table--filtered tbody tr:not(.filtered--show){display:none !important}iam-table table:not(.table--filtered):not(.table--ajax) tbody tr:nth-child(15)~tr{display:none}iam-table input:is([type=radio],[type=checkbox])+label:not(.radio--tick){padding-left:0 !important;margin:0 !important}iam-table input:is([type=radio],[type=checkbox])+label:not(.radio--tick):before,iam-table input:is([type=radio],[type=checkbox])+label:not(.radio--tick):after{top:.75rem !important;left:.25rem !important}iam-table:has([type=checkbox]:checked) tr:has([type=checkbox]) [type=checkbox]{width:100vw;height:100%;max-height:var(--row-height);max-width:100vw;cursor:pointer;pointer-events:all;top:auto;margin:0;margin-top:0rem}iam-table tr:has([type=checkbox]:checked){height:3.5rem}iam-table tr:has([type=checkbox]:checked){--row-bg: #E0E0E0}@media screen and (prefers-color-scheme: dark){iam-table tr:has([type=checkbox]:checked){--row-bg: #000000}}@container (width < 23.4375em){@media screen and (prefers-color-scheme: light){iam-table:has([slot=before]) iam-actionbar{background-color:#e6eaec}}iam-table:has([slot=before]) .actionbar__sticky+*{margin-top:0 !important}iam-table input:is([type=radio],[type=checkbox])+label:not(.radio--tick){padding-left:0 !important;margin:0 !important;min-height:2rem}iam-table input:is([type=radio],[type=checkbox])+label:not(.radio--tick):before,iam-table input:is([type=radio],[type=checkbox])+label:not(.radio--tick):after{top:.25rem !important;left:0 !important}iam-table:has([type=checkbox]:checked) tr:has([type=checkbox]) [type=checkbox]{width:100%;height:100%;max-height:100%;max-width:100%;margin-top:-2rem}}iam-table.table--fullwidth:not([data-expandable]) th.expand-button-heading{display:none}iam-table.table--fullwidth:not([data-expandable]) td:has([data-expand-button]){display:none}@container (width > 23.4375em){iam-table:not([data-expandable]) th.expand-button-heading{display:none}iam-table:not([data-expandable]) td.td--expand{display:none}iam-table[data-expandable] [data-expand-button]{margin:0}iam-table[data-expandable] [data-expand-button]:before{font-family:"Font Awesome 6 Pro";content:"";font-weight:500}iam-table[data-expandable] [data-expand-button][aria-expanded]:before{content:""}iam-table[data-expandable] tr:not(:has(p)) [data-expand-button]{display:none}iam-table[data-expandable] tr:not([data-view=full]) td p{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden}}@container (width < 23.4375em){iam-table:not(.table--fullwidth) .td--fixed+td:not(.td--fixed){border-top:none}}@container (width > 23.4375em){iam-table{--width-adjust: 0px}iam-table:has([type=checkbox]){--width-adjust: -1rem}iam-table .th--fixed{min-width:calc(4.5rem + var(--width-adjust));position:absolute;padding:0}iam-table .th--fixed:after{top:auto;left:0;content:"";position:absolute;width:100%;height:calc(var(--row-height) - 2px);background:linear-gradient(90deg, var(--row-bg) calc(100% - 1.5rem), transparent 100%)}iam-table .td--fixed{position:absolute;position:absolute;left:auto;top:auto;z-index:3;padding:0.25rem 0 0 0;min-width:4.5rem;height:calc(var(--row-height) - 2px);text-align:left;background:linear-gradient(90deg, var(--row-bg) calc(100% - 1.5rem), transparent 100%)}iam-table .td--fixed:has([open]){z-index:4}iam-table tr:has(.td--fixed){height:3.5rem}iam-table tr:is(:hover,:focus) .td--fixed{background:linear-gradient(90deg, var(--row-bg) calc(100% - 1.5rem), transparent 100%)}iam-table tr:has([data-expand-button]){height:calc(4.625rem - 2px)}iam-table .th--fixed+th:not(.th--fixed),iam-table .td--fixed+td:not(.td--fixed){padding-left:calc(4.5rem + var(--width-adjust))}iam-table .th--fixed:not(.expand-button-heading)+.th--fixed+th:not(.th--fixed),iam-table .td--fixed:not(.td--expand)+.td--fixed+td:not(.td--fixed){padding-left:calc(7.75rem + var(--width-adjust))}iam-table[data-expandable] .th--fixed+.th--fixed+th:not(.th--fixed),iam-table[data-expandable] .td--fixed+.td--fixed+td:not(.td--fixed){padding-left:calc(7.75rem + var(--width-adjust))}iam-table .th--fixed+.th--fixed,iam-table .td--fixed+.td--fixed{padding-left:calc(3.25rem + var(--width-adjust));min-width:calc(7.75rem + var(--width-adjust))}iam-table .th--fixed:has(+.th--fixed),iam-table .td--fixed:has(+.td--fixed){min-width:calc(3.25rem + var(--width-adjust));z-index:5}iam-table .dialog__wrapper{z-index:10}iam-table .dialog__wrapper:has([open]){z-index:20}iam-table[data-expandable] input:is([type=radio],[type=checkbox])+label:before,iam-table[data-expandable] input:is([type=radio],[type=checkbox])+label:after{left:1.25rem !important}iam-table:not([data-expandable]) th.expand-button-heading+th{padding-left:0 !important}iam-table:not([data-expandable]) td.td--expand+td{padding-left:0 !important}iam-table:not([data-expandable]) th.expand-button-heading+.th--fixed{min-width:calc(4.5rem + var(--width-adjust)) !important}iam-table:not([data-expandable]) td.td--expand+.td--fixed{min-width:calc(4.5rem + var(--width-adjust)) !important}}/*# sourceMappingURL=assets/css/components/table.global.css.map */
</style>`)}connectedCallback(){const t=new URLSearchParams(window.location.search);this.hasAttribute("data-total")||this.setAttribute("data-total",this.querySelectorAll("table tbody tr").length),this.hasAttribute("data-page")||this.setAttribute("data-page",t.has("page")?t.get("page"):1),this.hasAttribute("data-show")||this.setAttribute("data-show",t.has("show")?t.get("show"):15),this.hasAttribute("data-increment")||this.setAttribute("data-increment",this.getAttribute("data-show"));let i=this.classList.toString();if(i=i.replace("table--cta",""),i=i.replace("table--loading",""),this.shadowRoot.querySelector(".table__wrapper").className+=` ${i}`,this.querySelector(".actionbar__sticky")&&this.shadowRoot.querySelector(".table__wrapper").classList.add("has-actionbar"),this.table=this.querySelector("table"),this.savedTableBody=this.table.querySelector("tbody").cloneNode(!0),this.pagination=this.shadowRoot.querySelector("iam-pagination"),this.pagination.setAttribute("data-total",this.getAttribute("data-total")),this.pagination.setAttribute("data-page",this.getAttribute("data-page")),this.pagination.setAttribute("data-show",this.getAttribute("data-show")),this.pagination.setAttribute("data-increment",this.getAttribute("data-show")),this.hasAttribute("data-page-jump")&&this.pagination.setAttribute("data-page-jump","true"),this.hasAttribute("data-per-page")&&this.pagination.setAttribute("data-per-page","true"),this.hasAttribute("data-item-count")&&this.pagination.setAttribute("data-item-count","true"),this.hasAttribute("data-loading")&&this.pagination.setAttribute("data-loading","true"),this.classList.contains("table--fullwidth")&&this.pagination.setAttribute("data-minimal","true"),this.classList.contains("table--cta")||this.shadowRoot.querySelector(".table--cta").classList.remove("table--cta"),this.form=document.createElement("form"),this.hasAttribute("data-filterby")?this.form=document.querySelector(`#${this.getAttribute("data-filterby")}`):this.table.parentNode.insertBefore(this.form,this.table.nextSibling),this.form.hasAttribute("data-ajax")&&this.table.classList.add("table--ajax"),R(this.table,this.form),this.form.querySelector("[data-pagination]")||(this.form.innerHTML+=`<input name="page" type="hidden" value="${this.getAttribute("data-page")}" data-pagination="true" />`),this.form.querySelector("[data-show]")||(this.form.innerHTML+=`<input name="show" type="hidden" value="${this.getAttribute("data-show")}" data-show="true" />`),Q(this.table),V(this.table,this.form,this.pagination,this,this.savedTableBody),Z(this.table,this.form,this.pagination,this),tt(this.shadowRoot.querySelector("[data-export]"),this.table),this.form.getAttribute("data-ajax"))z(this.table,this.form,this.pagination,this);else{let o=function(n=1){return Math.floor(Math.random()*Date.now()*(n+1))};if(this.querySelector("iam-actionbar[data-selectall]")){const n=this.querySelector("iam-actionbar[data-selectall]");Array.from(this.table.querySelectorAll("thead tr")).forEach((a,l)=>{a.insertAdjacentHTML("afterbegin",'<th class="th--fixed"></th>')}),Array.from(this.table.querySelectorAll("tbody tr")).forEach((a,l)=>{let d=`row${o(l)}`;a.insertAdjacentHTML("afterbegin",`<td class="td--fixed selectrow"><input type="checkbox" name="row" id="${d}"/><label for="${d}"><span class="visually-hidden">Select row</span></label></td>`)}),this.table.addEventListener("change",a=>{if(a&&a.target instanceof HTMLElement&&a.target.closest(".selectrow input")){let l=this.table.querySelectorAll('.selectrow input[type="checkbox"]').length,d=this.table.querySelectorAll('.selectrow input[type="checkbox"]:checked').length;n.setAttribute("data-selected",l==d?"all":d)}}),n.addEventListener("selected",a=>{a.detail.selected=="0"?Array.from(this.table.querySelectorAll('.selectrow input[type="checkbox"]')).forEach((l,d)=>{l.checked=!1}):a.detail.selected=="all"&&Array.from(this.table.querySelectorAll('.selectrow input[type="checkbox"]')).forEach((l,d)=>{l.checked=!0})})}let u=-1;Array.from(this.table.querySelectorAll("tbody tr")).forEach((n,a)=>{if(n.querySelector(":scope > td > .dialog__wrapper")){let l=n.querySelector(":scope > td > .dialog__wrapper").parentNode;l.classList.add("td--fixed"),u=Array.from(l.parentNode.children).indexOf(l)}}),u!=-1&&(this.table.querySelector(`thead tr th:nth-child(${u+1})`).classList.add("th--fixed"),Array.from(this.table.querySelectorAll(`tbody tr td:nth-child(${u+1})`)).forEach((n,a)=>{n.classList.add("td--fixed")})),N(this.table,this.form,this.pagination,this),M(this.table,this.form,this),H(this.table,this.form)}this.shadowRoot.querySelector(".table__wrapper").addEventListener("scroll",o=>{this.table.querySelector("dialog[open]")&&(this.table.querySelector("dialog[open]").close(),this.table.querySelector(".dialog__wrapper > button.active").classList.remove("active"))})}static get observedAttributes(){return["data-total","data-page","data-show"]}attributeChangedCallback(t,i,o){switch(this.pagination=this.shadowRoot.querySelector("iam-pagination"),t){case"data-total":{i!=o&&this.pagination.setAttribute("data-total",o);break}case"data-show":{i!=o&&this.pagination.setAttribute("data-show",o);break}case"data-page":{i!=o&&this.pagination.setAttribute("data-page",o);break}}}}export{rt as default};
