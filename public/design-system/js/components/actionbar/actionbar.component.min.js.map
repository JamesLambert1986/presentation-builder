{"version":3,"file":"actionbar.component.min.js","sources":["../../modules/youtubevideo.js","../../modules/dialogs.js","actionbar.component.js"],"sourcesContent":["// @ts-nocheck\n/**\n * Integrate YouTube videos as a way of hosting videos without the overhead and worry surrounding hosting vides. i.e. file sizes, performance and accessibility.\n */\nclass youtubeVideo {\n    /** @param {Element} embed dom element */\n    constructor(embed) {\n        // If the scripts is already loaded then lets just create the embed\n        if (document.body.classList.contains('youtubeLoaded')) {\n            embed.addEventListener('click', function (e) {\n                // loop parent nodes from the target to the delegation node\n                for (var target = e.target; target && target != this; target = target.parentNode) {\n                    if (target.matches('a')) {\n                        e.preventDefault();\n                        createEmbed(target);\n                        break;\n                    }\n                }\n            }, false);\n        }\n        else {\n            this.loadScripts(embed, this.createEmbed);\n        }\n    }\n    /**\n     * Load the YouTube scripts before trying to create the embed\n     * @param {HTMLElement} embed dom element\n     */\n    loadScripts(embed) {\n        return new Promise((resolve, reject) => {\n            const image = new Image();\n            image.onload = function () {\n                // This code loads the IFrame Player API code asynchronously.\n                var tag = document.createElement('script');\n                tag.src = \"https://www.youtube.com/iframe_api\";\n                var firstScriptTag = document.getElementsByTagName('script')[0];\n                firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\n                document.body.classList.add('youtubeLoaded');\n                resolve(true);\n                // script has loaded, you can now use it safely\n                tag.onload = () => {\n                    embed.addEventListener('click', function (event) {\n                        console.log('click');\n                        // loop parent nodes from the target to the delegation node\n                        if (event && event.target instanceof HTMLElement && event.target.closest('a')) {\n                            event.preventDefault();\n                            createEmbed(event.target.closest('a'));\n                        }\n                    }, false);\n                };\n            };\n            image.onerror = function () {\n                reject(false);\n            };\n            image.src = \"https://youtube.com/favicon.ico\";\n        });\n    }\n}\nexport const createEmbed = function (target) {\n    // If there is more than one video lets make sure there is only one playing at a time.\n    if (typeof window.player != \"undefined\" && typeof window.player.pauseVideo == \"function\")\n        window.player.pauseVideo();\n    var video_id = target.getAttribute('data-id');\n    var link_id = target.getAttribute('id');\n    // create an id to pass t the script if one isn't present\n    if (typeof link_id == 'undefined' || link_id == null) {\n        var randLetter = String.fromCharCode(65 + Math.floor(Math.random() * 26));\n        link_id = randLetter + Date.now();\n        target.setAttribute('id', link_id);\n    }\n    // This function creates an <iframe> (and YouTube player) after the API code downloads.\n    function onYouTubeIframeAPIReady() {\n        window.player = new YT.Player(link_id, {\n            height: '100%',\n            width: '100%',\n            videoId: video_id,\n            playerVars: {\n                'modestbranding': 1,\n                'playsinline': 1,\n                'rel': 0,\n                'showinfo': 0\n            },\n            events: {\n                'onReady': onPlayerReady,\n                'onStateChange': onPlayerStateChange\n            }\n        });\n    }\n    onYouTubeIframeAPIReady();\n    // The API will call this function when the video player is ready.\n    function onPlayerReady(event) {\n        // Play the video straight away\n        event.target.playVideo();\n    }\n    // The API calls this function when the player's state changes.\n    // The function indicates that when playing a video (state=1)\n    var done = false;\n    function onPlayerStateChange(event) {\n        if (event.data == YT.PlayerState.PLAYING && !done) {\n            var link = document.getElementById(link_id);\n            link.classList.add('player-ready');\n            done = true;\n        }\n    }\n};\nexport default youtubeVideo;\n","// @ts-nocheck\nimport { createEmbed } from \"./youtubevideo.js\";\nconst extendDialogs = (body) => {\n    Array.from(body.querySelectorAll('dialog[open]')).forEach((dialog, index) => {\n        let parent = dialog.closest('.dialog__wrapper');\n        if (!parent) {\n            dialog.removeAttribute('open');\n            dialog.showModal();\n            dialog.focus();\n            createDialog(dialog);\n        }\n    });\n    // Dialogs/modals\n    body.addEventListener('click', (event) => {\n        if (event.target.tagName == 'IAM-ACTIONBAR')\n            return false;\n        // Modal\n        if (event && event.target instanceof HTMLElement && event.target.closest('[data-modal]')) {\n            const button = event.target.closest('[data-modal]');\n            const modalID = button.hasAttribute('data-modal') ? button.getAttribute('data-modal') : button.getAttribute('data-filter');\n            const dialog = document.querySelector(`dialog#${modalID}`);\n            createDialog(dialog);\n            // Open the modal!\n            dialog.showModal();\n            dialog.focus();\n            let firstWidth = dialog.offsetWidth;\n            dialog.setAttribute('style', `max-width: ${firstWidth}px;`);\n            // When the modal is opened we want to make sure any duplicate checkboxes are matching the originals\n            Array.from(dialog.querySelectorAll('[data-duplicate]')).forEach((element, index) => {\n                const id = element.getAttribute('data-duplicate');\n                const originalInput = document.getElementById(id);\n                if (element.checked != originalInput.checked) {\n                    element.checked = originalInput.checked;\n                    let changeEvent = new Event('change');\n                    element.dispatchEvent(changeEvent);\n                }\n            });\n            window.dataLayer = window.dataLayer || [];\n            window.dataLayer.push({\n                \"event\": \"openModal\",\n                \"id\": modalID\n            });\n        }\n        ;\n        // Close modal\n        if (event && event.target instanceof HTMLElement && event.target.closest('button.dialog__close')) {\n            const dialog = event.target.closest('dialog[open]');\n            event.preventDefault();\n            dialog.close();\n            // Remove active class from exiting active buttons\n            Array.from(document.querySelectorAll('.dialog__wrapper > button')).forEach((btnElement, index) => {\n                btnElement.classList.remove('active');\n            });\n            window.dataLayer = window.dataLayer || [];\n            window.dataLayer.push({\n                \"event\": \"closeModal\",\n                \"id\": dialog.getAttribute('id')\n            });\n        }\n        // Track default close buttons\n        if (event && event.target instanceof HTMLElement && event.target.closest('button[formmethod=\"dialog\"]')) {\n            const dialog = event.target.closest('dialog[open]');\n            // Remove active class from exiting active buttons\n            Array.from(document.querySelectorAll('.dialog__wrapper > button')).forEach((btnElement, index) => {\n                btnElement.classList.remove('active');\n            });\n            window.dataLayer = window.dataLayer || [];\n            window.dataLayer.push({\n                \"event\": \"closeModal\",\n                \"id\": dialog.getAttribute('id')\n            });\n        }\n        // Close the modal when clicked on the backdrop\n        if (event && event.target instanceof HTMLElement && event.target.closest('dialog[open]')) {\n            let dialog = event.target.closest('dialog[open]');\n            // Small fix to make sure the dialog isn't a dialog inside of a dialog.\n            var style = window.getComputedStyle(dialog);\n            if (style.display === 'contents')\n                dialog = dialog.parentNode.closest('dialog[open]');\n            // Dont allow the backdrop to be clicked when transactional\n            if (!dialog.classList.contains('dialog--transactional') && !dialog.classList.contains('dialog--acknowledgement')) {\n                const dialogDimensions = dialog.getBoundingClientRect();\n                if (event.clientX < dialogDimensions.left || event.clientX > dialogDimensions.right || event.clientY < dialogDimensions.top || event.clientY > dialogDimensions.bottom) {\n                    if (!event.target.closest('input[type=\"radio\"]')) // Weird bug when interacting with radio input fields within dialogs cuases it to close\n                        dialog.close();\n                    window.dataLayer = window.dataLayer || [];\n                    window.dataLayer.push({\n                        \"event\": \"closeModal\",\n                        \"id\": dialog.getAttribute('id')\n                    });\n                }\n            }\n        }\n        // Popover\n        if (event && event.target instanceof HTMLElement && event.target.closest('.dialog__wrapper > button')) {\n            event.stopPropagation();\n            let btn = event.target.closest('.dialog__wrapper > button');\n            let parent = event.target.closest('.dialog__wrapper > button').parentNode;\n            let dataEvent = \"openPopover\";\n            let popover = parent.querySelector(':scope > dialog');\n            if (document.querySelector('*:not([data-keep-open]) > dialog[open]') && document.querySelector('*:not([data-keep-open]) > dialog[open]') != popover)\n                document.querySelector('*:not([data-keep-open]) > dialog[open]').close();\n            // Remove active class from exiting active buttons\n            Array.from(document.querySelectorAll('.dialog__wrapper > button')).forEach((btnElement, index) => {\n                btnElement.removeAttribute('aria-expanded');\n            });\n            if (popover.hasAttribute('open')) {\n                popover.close();\n                dataEvent = \"closePopover\";\n                popover.removeAttribute('style');\n                btn.removeAttribute('aria-expanded');\n            }\n            else {\n                popover.show();\n                btn.setAttribute('aria-expanded', true);\n                var position = btn.getBoundingClientRect();\n                let topOffset = position.top;\n                let leftOffset = position.left;\n                if (btn.closest('iam-table')) {\n                    let container = btn.closest('iam-table').parentNode.getBoundingClientRect();\n                    topOffset -= container.top;\n                    leftOffset -= container.left;\n                }\n                if (popover.classList.contains('dialog--fix')) {\n                    popover.setAttribute('style', `position:fixed;top: ${topOffset}px; left: ${leftOffset}px; margin: 3rem 0 0 0;`);\n                }\n            }\n            // When the dialog is fixed it could dip under the viewport\n            // Lets check the dimensions and transform it to appear above\n            let boundingRec = popover.getBoundingClientRect();\n            let popoverBottom = boundingRec.bottom - window.scrollY;\n            let windowPos = window.innerHeight - window.scrollY;\n            if (popoverBottom > windowPos) {\n                let currentStyle = popover.hasAttribute('style') ? popover.getAttribute('style') + ' ' : '';\n                popover.setAttribute('style', currentStyle + `transform: translate(0, calc(-100% - 4rem))`);\n                // Check that the dialog doesn't go over the top of the page\n                boundingRec = popover.getBoundingClientRect();\n                let popoverTop = boundingRec.top - window.scrollY;\n                if (popoverTop < 100)\n                    popover.removeAttribute('style');\n            }\n            window.dataLayer = window.dataLayer || [];\n            window.dataLayer.push({\n                \"event\": dataEvent,\n                \"id\": btn.textContent\n            });\n        }\n        ;\n        // Close popovers when clicked away\n        if (event && event.target instanceof HTMLElement && !event.target.closest('dialog[open]') && !event.target.closest('.dialog__wrapper > button')) {\n            if (document.querySelector('.dialog__wrapper:not([data-keep-open]) > dialog[open]'))\n                document.querySelector('.dialog__wrapper:not([data-keep-open]) > dialog[open]').close();\n            Array.from(document.querySelectorAll('.dialog__wrapper:not([data-keep-open]) > button')).forEach((btnElement, index) => {\n                btnElement.removeAttribute('aria-expanded');\n            });\n        }\n    });\n    return null;\n};\nexport const createDialog = (dialog) => {\n    // Create the video embed\n    let videoButton = dialog.querySelector('.youtube-embed a');\n    if (videoButton) {\n        createEmbed(videoButton);\n    }\n    // Multi dialog\n    if (dialog.classList.contains('dialog--multi') && !dialog.querySelector(':scope > .steps')) {\n        createMultiFormDialog(dialog);\n    }\n    // If you are using Vue eevents and bindings its recommended to add in the .mh-lg div manually to the dialog\n    if (!dialog.querySelector(':scope > .mh-lg') && !dialog.classList.contains('dialog--multi')) {\n        dialog.innerHTML = `<div class=\"mh-lg\">${dialog.innerHTML}</div>`;\n        let dialogContent = dialog.querySelector('.mh-lg');\n        let titleElement = dialog.querySelector('.mh-lg :is(.h1,.h2,.h3,.h4,.h5,.h6)');\n        if (titleElement) {\n            let optionalElement = titleElement.previousSibling;\n            dialogContent.before(titleElement);\n            if (optionalElement)\n                titleElement.before(optionalElement);\n        }\n    }\n    // Create close button is needed\n    if (!dialog.querySelector(':scope > button:first-child'))\n        dialog.insertAdjacentHTML('afterbegin', `<button class=\"dialog__close\">Close</button>`);\n};\nexport const createMultiFormDialog = (dialog) => {\n    let buttons = \"\";\n    let fieldsets = Array.from(dialog.querySelectorAll('fieldset[data-title]'));\n    let form = dialog.querySelector('form');\n    fieldsets.forEach((fieldset, index) => {\n        buttons += `<button data-title=\"${fieldset.getAttribute('data-title')}\" type=\"button\" class=\"${index == 0 ? \"active\" : \"\"}\" tabindex=\"-1\">${fieldset.getAttribute('data-title')}</button>`;\n        const btnWrapper = document.createElement(\"div\");\n        btnWrapper.classList.add('btn--wrapper');\n        fieldset.appendChild(btnWrapper);\n        if (index != 0)\n            btnWrapper.innerHTML += `<button data-title=\"${fieldsets[index - 1].getAttribute('data-title')}\" class=\"btn btn-secondary mb-0\" data-previous type=\"button\">Previous</button>`;\n        if (index != fieldsets.length - 1)\n            btnWrapper.innerHTML += `<button data-title=\"${fieldsets[index + 1].getAttribute('data-title')}\" class=\"btn btn-primary mb-0\" data-next type=\"button\">Next</button>`;\n        // Last fieldset\n        if (index == fieldsets.length - 1) {\n            if (form && form.querySelector(':scope > button[type=\"submit\"]')) {\n                let existingButton = form.querySelector(':scope > button[type=\"submit\"]');\n                existingButton.classList.add('mb-0');\n                btnWrapper.insertAdjacentElement('beforeend', existingButton);\n            }\n            else\n                btnWrapper.innerHTML += `<button data-title=\"${fieldsets[index].getAttribute('data-title')}\" class=\"btn btn-primary mb-0\" data-next type=\"submit\">Submit</button>`;\n        }\n    });\n    dialog.insertAdjacentHTML('afterbegin', `<div class=\"steps bg-primary\">${buttons}</div>`);\n    // Open the fieldset with an error inside\n    let validatedFieldsets = Array.from(dialog.querySelectorAll('fieldset.was-validated'));\n    for (let i = 0; i < validatedFieldsets.length; i++) {\n        let fieldset = validatedFieldsets[i];\n        let fieldsetID = fieldset.getAttribute('data-title');\n        if (fieldset.querySelector('.is-invalid')) {\n            Array.from(dialog.querySelectorAll(`[data-title=\"${fieldsetID}\"]`)).forEach((element, index) => {\n                element.classList.add('active');\n            });\n            break;\n        }\n        else {\n            Array.from(dialog.querySelectorAll(`[data-title=\"${fieldsetID}\"]`)).forEach((element, index) => {\n                element.classList.add('valid');\n            });\n        }\n    }\n    // Prevent the bubble messages\n    dialog.addEventListener('invalid', (function () {\n        return function (e) {\n            e.preventDefault();\n        };\n    })(), true);\n    function validateFieldset(button) {\n        const currentFieldset = dialog.querySelector(`fieldset.active`) ? dialog.querySelector(`fieldset.active`) : dialog.querySelector(`fieldset[data-title]`);\n        const currentFieldsetID = currentFieldset.getAttribute('data-title');\n        let isFieldsetValid = true;\n        currentFieldset.classList.add('was-validated');\n        Array.from(currentFieldset.querySelectorAll('input')).forEach((input, index) => {\n            if (!input.checkValidity())\n                isFieldsetValid = false;\n        });\n        // If valid mode to next field set\n        if (!isFieldsetValid) {\n            Array.from(dialog.querySelectorAll(`[data-title=\"${currentFieldsetID}\"]`)).forEach((element, index) => {\n                element.classList.remove('valid');\n            });\n        }\n        else {\n            Array.from(dialog.querySelectorAll(`[data-title=\"${currentFieldsetID}\"]`)).forEach((element, index) => {\n                element.classList.add('valid');\n            });\n        }\n        // Allow the previous button to navigate\n        if (isFieldsetValid || !button.hasAttribute('data-next')) {\n            const fieldset = dialog.querySelector(`fieldset[data-title=\"${button.getAttribute('data-title')}\"]`);\n            const step = dialog.querySelector(`.steps button[data-title=\"${button.getAttribute('data-title')}\"]`);\n            Array.from(dialog.querySelectorAll('button')).forEach((button, index) => {\n                button.classList.remove('active');\n            });\n            Array.from(dialog.querySelectorAll('fieldset')).forEach((button, index) => {\n                button.classList.remove('active');\n            });\n            step.classList.add('active');\n            fieldset.classList.add('active');\n        }\n        let fieldsetCount = Array.from(dialog.querySelectorAll(`fieldset`)).length;\n        let validFieldsetCount = Array.from(dialog.querySelectorAll(`fieldset.valid`)).length;\n        // update the progress bar\n        dialog.style.setProperty('--progress', `${(validFieldsetCount / (fieldsetCount - 1) * 100)}%`);\n    }\n    // remove error messages from server\n    dialog.addEventListener('keydown', (event) => {\n        if (event && event.target instanceof HTMLElement && event.target.closest('button')) {\n            const button = event.target.closest('button');\n            if (event.keyCode == 13 && button.getAttribute('type') != \"submit\") {\n                event.preventDefault();\n                validateFieldset(button);\n            }\n        }\n        if (event && event.target instanceof HTMLElement && event.target.closest('input')) {\n            const input = event.target.closest('input');\n            input.classList.remove('is-invalid');\n            if (event.keyCode == 13) {\n                event.preventDefault();\n            }\n        }\n    });\n    dialog.addEventListener('click', (event) => {\n        if (event && event.target instanceof HTMLElement && event.target.closest('button[type=\"submit\"]')) {\n            const form = event.target.closest('form');\n            form.classList.add('was-validated');\n        }\n        else if (event && event.target instanceof HTMLElement && event.target.closest('button[data-title]')) {\n            const button = event.target.closest('button[data-title]');\n            validateFieldset(button);\n        }\n        ;\n        return null;\n    });\n};\nexport default extendDialogs;\n","// @ts-nocheck\nimport extendDialogs from \"../../modules/dialogs.js\";\n// Data layer Web component created\nwindow.dataLayer = window.dataLayer || [];\nwindow.dataLayer.push({\n    \"event\": \"customElementRegistered\",\n    \"element\": \"action bar\"\n});\nfunction setSelectAllInput(element, value) {\n    if (element && value == \"all\") {\n        element.querySelector('input').indeterminate = false;\n        element.querySelector('input').checked = true;\n        element.querySelector('label').textContent = `Select all`;\n    }\n    else if (element && value == 0) {\n        element.querySelector('input').indeterminate = false;\n        element.querySelector('input').checked = false;\n        element.querySelector('label').textContent = `Select all`;\n    }\n    else if (element && value) {\n        element.querySelector('input').indeterminate = true;\n        element.querySelector('input').checked = false;\n        element.querySelector('label').textContent = `${value} item${value > 1 ? 's' : ''} selected`;\n    }\n    else if (element) {\n        element.querySelector('input').checked = false;\n        element.querySelector('input').indeterminate = false;\n        element.querySelector('label').textContent = `Select all`;\n    }\n}\nclass iamActionbar extends HTMLElement {\n    constructor() {\n        super();\n        this.attachShadow({ mode: 'open' });\n        const assetLocation = document.body.hasAttribute('data-assets-location') ? document.body.getAttribute('data-assets-location') : '/assets';\n        const coreCSS = document.body.hasAttribute('data-core-css') ? document.body.getAttribute('data-core-css') : `${assetLocation}/css/core.min.css`;\n        const loadCSS = `@import \"${assetLocation}/css/components/actionbar.css\";`;\n        const loadExtraCSS = `@import \"${assetLocation}/css/components/actionbar.global.css\";`;\n        const template = document.createElement('template');\n        template.innerHTML = `\r\n    <style>\r\n    @import \"${coreCSS}\";\r\n    ${loadCSS}\r\n    ${this.hasAttribute('css') ? `@import \"${this.getAttribute('css')}\";` : ``}\r\n    </style>\r\n    <link rel=\"stylesheet\" href=\"https://kit.fontawesome.com/26fdbf0179.css\" crossorigin=\"anonymous\">\r\n    <div class=\"actionbar__wrapper\">\r\n      <div class=\"actionbar\">\r\n        <div class=\"safe-area\">\r\n          <slot></slot>\r\n          <div class=\"body\">\r\n            <div class=\"dialog__wrapper dialog__wrapper--right dialog-overflow d-none show\">\r\n              <button class=\"btn btn-secondary btn-compact fa-ellipsis-vertical m-0\">More actions</button>\r\n              <dialog class=\"dialog--list\">\r\n                <slot name=\"overflow\"></slot>\r\n                <slot name=\"menu\"></slot>\r\n              </dialog>\r\n            </div>\r\n            <button class=\"btn btn-secondary btn-compact btn-sm fa-search\" data-search=\"\">Search</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"actionbar--selected\">\r\n        <div class=\"safe-area\">\r\n          <slot name=\"selected\"></slot>\r\n          <div class=\"body\">\r\n            <div class=\"dialog__wrapper dialog__wrapper--right dialog-overflow d-none show\">\r\n              <button class=\"btn btn-secondary btn-compact fa-ellipsis-vertical m-0\">More actions</button>\r\n              <dialog class=\"dialog--list\">\r\n                <slot name=\"selected-overflow\"></slot>\r\n              </dialog>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"actionbar--search\">\r\n        <button data-search class=\"btn btn-compact fa-xmark-large btn-secondary m-0\" >Close</button>\r\n\r\n        <div class=\"search-wrapper\">\r\n          <label for=\"search\" class=\"visually-hidden\">Input field label</label>\r\n          <button class=\"suffix\"><i class=\"fa-regular fa-search\"></i></button>\r\n          <input type=\"text\" id=\"search\" name=\"search\" required=\"\">\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n    `;\n        this.shadowRoot.appendChild(template.content.cloneNode(true));\n        // insert extra CSS\n        if (!document.getElementById('actionbarGlobal'))\n            document.head.insertAdjacentHTML('beforeend', `<style id=\"actionbarGlobal\">${loadExtraCSS}</style>`);\n    }\n    connectedCallback() {\n        let that = this;\n        const actionbarWrapper = this.shadowRoot.querySelector('.actionbar__wrapper');\n        // #region select all\n        if (this.hasAttribute('data-selectall')) {\n            actionbarWrapper.insertAdjacentHTML('afterbegin', `<div class=\"selectall pb-0\"><input type=\"checkbox\" name=\"selectall\" id=\"selectall\"><label for=\"selectall\" class=\"m-0\">Select all</label></div>`);\n            let selectAll = this.shadowRoot.querySelector('.selectall');\n            if (this.hasAttribute('data-selected')) {\n                setSelectAllInput(selectAll, this.getAttribute('data-selected'));\n            }\n            selectAll.addEventListener('change', (event) => {\n                if (event && event.target instanceof HTMLElement && event.target.closest('input')) {\n                    if (event.target.closest('input').checked)\n                        this.setAttribute('data-selected', 'all');\n                    else\n                        this.setAttribute('data-selected', 0);\n                }\n            });\n            let cancelButton = this.querySelector('button[data-cancel]');\n            if (cancelButton) {\n                cancelButton.addEventListener('click', (event) => {\n                    this.setAttribute('data-selected', 0);\n                });\n            }\n        }\n        // Wtach div for the select inputs\n        if (this.hasAttribute('data-select-watch')) {\n            const element = document.getElementById(this.getAttribute('data-select-watch'));\n            element.setAttribute('data-select-container', 'true');\n            Array.from(element.querySelectorAll('input[type=\"checkbox\"]')).forEach((input, index) => {\n                input.parentElement.setAttribute('slot', 'checkbox');\n            });\n            element.addEventListener('change', (event) => {\n                if (event && event.target instanceof HTMLElement && event.target.closest('[type=\"checkbox\"]')) {\n                    let count = element.querySelectorAll('input[type=\"checkbox\"]').length;\n                    let countChecked = element.querySelectorAll('input[type=\"checkbox\"]:checked').length;\n                    that.setAttribute('data-selected', count == countChecked ? \"all\" : countChecked);\n                    let input = event.target.closest('[type=\"checkbox\"]');\n                    if (countChecked) {\n                        Array.from(element.querySelectorAll('input[type=\"checkbox\"]')).forEach((input, index) => {\n                            if (input.closest('iam-card'))\n                                input.closest('iam-card').setAttribute('data-selected', 'true');\n                        });\n                    }\n                    else {\n                        Array.from(element.querySelectorAll('input[type=\"checkbox\"]')).forEach((input, index) => {\n                            if (input.closest('iam-card'))\n                                input.closest('iam-card').removeAttribute('data-selected');\n                        });\n                    }\n                }\n                ;\n            });\n        }\n        // #endregion\n        // #region switchviews\n        if (this.hasAttribute('data-switchviews')) {\n            let btns = '';\n            let viewList = this.getAttribute('data-switchviews').split(',');\n            viewList.forEach((view, index) => {\n                let icon = 'fa-grid-2';\n                if (view == \"list\")\n                    icon = 'fa-grip-lines';\n                else if (view == \"small\")\n                    icon = 'fa-bars';\n                btns += `<button class=\"btn btn-action btn-compact mb-0 fa-regular ${icon}\">${view}</button>`;\n            });\n            actionbarWrapper.insertAdjacentHTML('afterbegin', `<div class=\"views m-0\">${btns}</div>`);\n            let views = this.shadowRoot.querySelector('.views');\n            views.addEventListener('click', (event) => {\n                if (event && event.target instanceof HTMLElement && event.target.closest('.btn-action')) {\n                    let btn = event.target.closest('.btn-action');\n                    this.setAttribute('data-view', btn.textContent);\n                    const switchEvent = new CustomEvent(\"switch-view\", { detail: { view: btn.textContent } });\n                    this.dispatchEvent(switchEvent);\n                }\n            });\n        }\n        // #endregion\n        // #region search\n        const searchBar = this.shadowRoot.querySelector('.actionbar--search');\n        if (this.hasAttribute('data-search') && this.getAttribute('data-search') == 'show')\n            searchBar.classList.add('show');\n        const searchBtn = this.shadowRoot.querySelector('button[data-search]');\n        this.shadowRoot.addEventListener('click', (event) => {\n            if (event && event.target instanceof HTMLElement && event.target.closest('button[data-search]')) {\n                searchBar.classList.toggle('show');\n                searchBtn.toggleAttribute('aria-expanded');\n            }\n        });\n        searchBar.addEventListener('keyup', (event) => {\n            const keyupEvent = new CustomEvent(\"search-keyup\", { detail: { search: searchBar.querySelector('input').value } });\n            this.dispatchEvent(keyupEvent);\n        });\n        searchBar.addEventListener('change', (event) => {\n            const changeEvent = new CustomEvent(\"search-change\", { detail: { search: searchBar.querySelector('input').value } });\n            this.dispatchEvent(changeEvent);\n        });\n        searchBar.addEventListener('click', (event) => {\n            if (event && event.target instanceof HTMLElement && event.target.closest('button.suffix')) {\n                const submitEvent = new CustomEvent(\"search-submit\", { detail: { search: searchBar.querySelector('input').value } });\n                this.dispatchEvent(submitEvent);\n            }\n        });\n        // #endregion\n        // Make sure dialogs created in the shadow dom work\n        Array.from(this.shadowRoot.querySelectorAll('.body')).forEach((element, index) => {\n            extendDialogs(element);\n        });\n        // #region Reponsive safe area\n        function hideButtons() {\n            const wrapperWidth = actionbarWrapper.scrollWidth;\n            const screenWidth = document.documentElement.scrollWidth;\n            let safeAreaWidth = 750;\n            let elementMargin = 16;\n            let mobileSafeWidth = that.hasAttribute('data-switchviews') ? 144 : 210;\n            // We need to modify the widths to mimic the CSS's scaling functionality\n            let modifier = 1;\n            if (screenWidth >= 992 && screenWidth <= 1280) {\n                modifier = screenWidth / 1280;\n            }\n            else if (screenWidth >= 576 && screenWidth <= 1280) {\n                modifier = screenWidth / 768;\n            }\n            else if (screenWidth < 576) {\n                modifier = screenWidth / 375;\n            }\n            // Work out the safe sapce width depending upon the wrappers width and modifier comp\n            if (wrapperWidth >= 992 && wrapperWidth <= 1280) {\n                safeAreaWidth = safeAreaWidth * modifier;\n            }\n            else if (wrapperWidth >= 576 && wrapperWidth <= 1280) {\n                safeAreaWidth = 450 * modifier;\n            }\n            else if (wrapperWidth < 576) {\n                safeAreaWidth = mobileSafeWidth * modifier;\n            }\n            // Margin in between elements\n            elementMargin = elementMargin * modifier;\n            // If the wrapper width is small we want to reduce the btn sizes by adding or removing btn-compact classes\n            if (wrapperWidth < 576) {\n                Array.from(that.querySelectorAll(':scope > .btn:not(.js-updated), :scope > .dialog__wrapper > .btn[class*=\"fa-\"]:first-child:not(.js-updated)')).forEach((element, index) => {\n                    element.className = element.className.replace(' btn-compact', ' _btn-compact');\n                    element.classList.add('btn-compact');\n                    element.classList.add('js-updated');\n                });\n            }\n            else {\n                Array.from(that.querySelectorAll(':scope > .btn.js-updated, :scope > .dialog__wrapper > .btn.js-updated:first-child')).forEach((element, index) => {\n                    element.classList.remove('btn-compact');\n                    element.classList.remove('js-updated');\n                    element.className = element.className.replace(' _btn-compact', ' btn-compact');\n                });\n            }\n            // Reset the elements before we decide what elements become slotted into the overflow\n            Array.from(that.querySelectorAll('[slot]')).forEach((element, index) => {\n                if (element.getAttribute(\"slot\") == \"overflow\")\n                    element.removeAttribute('slot');\n                if (element.getAttribute(\"slot\") == \"selected-overflow\")\n                    element.setAttribute('slot', 'selected');\n            });\n            Array.from(that.querySelectorAll('.show')).forEach((element, index) => {\n                element.classList.remove('show');\n            });\n            // Foreach safe area lets check what elements are slotted in them and if they need an overflow\n            Array.from(that.shadowRoot.querySelectorAll('.safe-area')).forEach((element, index) => {\n                // Decide on which overflow slot to use\n                let overflowSlot = \"overflow\";\n                if (element.querySelector('slot').hasAttribute('name') && element.querySelector('slot').getAttribute('name') == \"selected\")\n                    overflowSlot = \"selected-overflow\";\n                // Get the slotted elements, remember they aren't children of the safe area\n                let elements = element.querySelector('slot').assignedElements();\n                let tempWidth = 44 * modifier; // Allow space for the overflow button\n                // If search then allow for the search button width\n                if (that.hasAttribute('data-search'))\n                    tempWidth += 44 * modifier;\n                // Foreach element that isn't an action button or dialog wrapper add to the width, these will not be moved into the overflow slot\n                for (let i = 0; i < elements.length; i++) {\n                    if (!elements[i].classList.contains('btn-action') && !elements[i].classList.contains('dialog__wrapper')) {\n                        tempWidth += elements[i].offsetWidth;\n                        tempWidth += elementMargin;\n                    }\n                }\n                // Foreach dialog wrapper decide if safe in safe area or move into the overflow slot, dialog wrappers have priority over the action buttons\n                for (let i = 0; i < elements.length; i++) {\n                    if (elements[i].classList.contains('dialog__wrapper')) {\n                        elements[i].classList.add('show');\n                        tempWidth += elements[i].offsetWidth;\n                        tempWidth += (elementMargin / 2);\n                        // If we have exceeded the safe area then lets break the loop\n                        if (tempWidth - (elementMargin / 2) > safeAreaWidth) {\n                            elements[i].classList.remove('show');\n                            break;\n                        }\n                    }\n                }\n                // Foreach action button \n                for (let i = 0; i < elements.length; i++) {\n                    if (elements[i].classList.contains('btn-action')) {\n                        elements[i].classList.add('show');\n                        tempWidth += elements[i].offsetWidth;\n                        tempWidth += (elementMargin / 2);\n                        // If we have exceeded the safe area then lets break the loop\n                        if (tempWidth - (elementMargin / 2) > safeAreaWidth) {\n                            elements[i].classList.remove('show');\n                            break;\n                        }\n                    }\n                }\n                let overflowDialog = element.querySelector('.dialog-overflow');\n                if (overflowDialog)\n                    overflowDialog.classList.add('d-none');\n                // Decide which elements go into the overflow slot\n                for (let i = 0; i < elements.length; i++) {\n                    if (elements[i].classList.contains('btn-action') || elements[i].classList.contains('dialog__wrapper')) {\n                        if (!elements[i].classList.contains('show')) {\n                            // Move to the slot by changing the attribute\n                            elements[i].setAttribute('slot', overflowSlot);\n                            // if an element has been added to overflow slot then make sure we show the overflow menu button\n                            if (overflowDialog)\n                                overflowDialog.classList.remove('d-none');\n                        }\n                    }\n                }\n            });\n        }\n        // Check buttons on load and when the wrapper element gets resized.\n        hideButtons();\n        new ResizeObserver(hideButtons).observe(actionbarWrapper);\n        // #endregion\n    }\n    static get observedAttributes() {\n        return [\"data-selected\"];\n    }\n    attributeChangedCallback(attrName, oldVal, newVal) {\n        switch (attrName) {\n            case \"data-selected\": {\n                let selectAll = this.shadowRoot.querySelector('.selectall');\n                if (selectAll)\n                    setSelectAllInput(selectAll, newVal);\n                const event = new CustomEvent(\"selected\", { detail: { selected: newVal } });\n                this.dispatchEvent(event);\n                if (newVal == \"all\" && this.hasAttribute('data-select-watch')) {\n                    const element = document.getElementById(this.getAttribute('data-select-watch'));\n                    Array.from(element.querySelectorAll('input[type=\"checkbox\"]')).forEach((input, index) => {\n                        input.checked = true;\n                        if (input.closest('iam-card'))\n                            input.closest('iam-card').setAttribute('data-selected', 'true');\n                    });\n                }\n                if (newVal == \"0\" && this.hasAttribute('data-select-watch')) {\n                    const element = document.getElementById(this.getAttribute('data-select-watch'));\n                    Array.from(element.querySelectorAll('input[type=\"checkbox\"]')).forEach((input, index) => {\n                        input.checked = false;\n                        if (input.closest('iam-card'))\n                            input.closest('iam-card').removeAttribute('data-selected', 'true');\n                    });\n                }\n                break;\n            }\n        }\n    }\n}\nexport default iamActionbar;\n"],"names":["createEmbed","target","video_id","link_id","randLetter","onYouTubeIframeAPIReady","onPlayerReady","onPlayerStateChange","event","done","link","extendDialogs","body","dialog","index","createDialog","button","modalID","firstWidth","element","id","originalInput","changeEvent","btnElement","style","dialogDimensions","btn","parent","dataEvent","popover","position","topOffset","leftOffset","container","boundingRec","popoverBottom","windowPos","currentStyle","videoButton","createMultiFormDialog","dialogContent","titleElement","optionalElement","buttons","fieldsets","form","fieldset","btnWrapper","existingButton","validatedFieldsets","i","fieldsetID","e","validateFieldset","currentFieldset","currentFieldsetID","isFieldsetValid","input","step","fieldsetCount","validFieldsetCount","setSelectAllInput","value","iamActionbar","assetLocation","coreCSS","template","that","actionbarWrapper","selectAll","cancelButton","count","countChecked","btns","view","icon","switchEvent","searchBar","searchBtn","keyupEvent","submitEvent","hideButtons","wrapperWidth","screenWidth","safeAreaWidth","elementMargin","mobileSafeWidth","modifier","overflowSlot","elements","tempWidth","overflowDialog","attrName","oldVal","newVal"],"mappings":"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"}