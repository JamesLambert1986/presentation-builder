{"version":3,"file":"pagination.component.min.js","sources":["pagination.component.js"],"sourcesContent":["// @ts-nocheck\nclass iamPagination extends HTMLElement {\n    constructor() {\n        super();\n        this.attachShadow({ mode: 'open' });\n        const assetLocation = document.body.hasAttribute('data-assets-location') ? document.body.getAttribute('data-assets-location') : '/assets';\n        const coreCSS = document.body.hasAttribute('data-core-css') ? document.body.getAttribute('data-core-css') : `${assetLocation}/css/core.min.css`;\n        const loadCSS = `@import \"${assetLocation}/css/components/pagination.css\";`;\n        const template = document.createElement('template');\n        template.innerHTML = `\r\n    <style>\r\n    @import \"${coreCSS}\";\r\n    ${loadCSS}\r\n    \r\n    ${this.hasAttribute('css') ? `@import \"${this.getAttribute('css')}\";` : ``}\r\n    </style>\r\n    <link rel=\"stylesheet\" href=\"https://kit.fontawesome.com/26fdbf0179.css\" crossorigin=\"anonymous\">\r\n    <div class=\"pagination d-none\">\r\n  \r\n      <div class=\"minimal\" part=\"minimal\">\r\n        <div class=\"page-jump\">\r\n          <div><select class=\"select--minimal\"></select></div>\r\n          <span class=\"total-pages\"></span>\r\n        </div>\r\n        \r\n        <button class=\"prev\" disabled>Prev</button>\r\n        <button class=\"next\" disabled>Next</button>\r\n      </div>\r\n\r\n      <div class=\"item-count\" part=\"item-count\"></div>\r\n      <div class=\"per-page\" part=\"per-page\">\r\n        <div>\r\n          <select class=\"select--minimal\">\r\n            <option value=\"15\">15</option>\r\n            <option value=\"25\">25</option>\r\n            <option value=\"40\">40</option>\r\n            <option value=\"50\">50</option>\r\n          </select>\r\n        </div>\r\n        <span> / page</span>\r\n      </div>\r\n      <div class=\"mobile-controls m-auto text-center\">\r\n        <i class=\"fa-solid fa-spinner fa-spin\"></i>\r\n        <button class=\"load-more btn btn-primary m-auto\">Load more</a>\r\n      </div>\r\n    </div>\r\n    `;\n        this.shadowRoot.appendChild(template.content.cloneNode(true));\n    }\n    connectedCallback() {\n        // Set default attributes\n        const params = new URLSearchParams(window.location.search);\n        if (!this.hasAttribute('data-total'))\n            this.setAttribute('data-total', 15);\n        if (!this.hasAttribute('data-page'))\n            this.setAttribute('data-page', (params.has('page') ? params.get('page') : 1));\n        if (!this.hasAttribute('data-show'))\n            this.setAttribute('data-show', (params.has('show') ? params.get('show') : 15));\n        if (!this.hasAttribute('data-increment'))\n            this.setAttribute('data-increment', this.getAttribute('data-show'));\n        // Elements\n        const select = this.shadowRoot.querySelector('.page-jump select');\n        const prev = this.shadowRoot.querySelector('.prev');\n        const next = this.shadowRoot.querySelector('.next');\n        const perPage = this.shadowRoot.querySelector('.per-page select');\n        const loadMore = this.shadowRoot.querySelector('.load-more');\n        // Add the select inputs, enable or disable buttons, update the helper text\n        this.setup();\n        // Select on change will update the data-page attr which will dispatch an event\n        select.addEventListener('change', (event) => {\n            this.setAttribute('data-show', this.getAttribute('data-increment'));\n            this.setAttribute('data-page', event.target.value);\n        });\n        // Next and previous buttons will simply trigger and on change on the select which in turn will dispatch an event\n        next.addEventListener('click', (event) => {\n            select.value = parseInt(select.value) + 1;\n            select.dispatchEvent(new Event('change'));\n        });\n        prev.addEventListener('click', (event) => {\n            select.value = parseInt(select.value) - 1;\n            select.dispatchEvent(new Event('change'));\n        });\n        // Update how many is shown \n        perPage.addEventListener('change', (event) => {\n            this.setAttribute('data-increment', event.target.value);\n        });\n        loadMore.addEventListener('click', (event) => {\n            let newValue = parseInt(this.getAttribute('data-show')) + parseInt(this.getAttribute('data-increment'));\n            this.setAttribute('data-show', newValue);\n            if (newValue > parseInt(this.getAttribute('data-total'))) {\n                loadMore.remove();\n            }\n        });\n    }\n    setup() {\n        // Elements\n        const wrapper = this.shadowRoot.querySelector('.pagination');\n        const select = this.shadowRoot.querySelector('.page-jump select');\n        const prev = this.shadowRoot.querySelector('.prev');\n        const next = this.shadowRoot.querySelector('.next');\n        const itemCount = this.shadowRoot.querySelector('.item-count');\n        const perPage = this.shadowRoot.querySelector('.per-page select');\n        const totalPages = this.shadowRoot.querySelector('.total-pages');\n        // Values\n        const currentPage = parseInt(this.getAttribute('data-page'));\n        const total = parseInt(this.getAttribute('data-total'));\n        const show = parseInt(this.getAttribute('data-show'));\n        const increment = parseInt(this.getAttribute('data-increment'));\n        const numberPages = Math.ceil(total / increment);\n        if (total > show)\n            wrapper.classList.remove('d-none');\n        // Populate the select input with the number of pages\n        let strOptions = '';\n        for (let i = 1; i <= numberPages; i++) {\n            strOptions += `<option value=\"${i}\" ${i == currentPage ? 'selected' : ''}>${i}</option>`;\n        }\n        select.innerHTML = strOptions;\n        totalPages.innerHTML = `of ${numberPages}`;\n        // Next button\n        if (currentPage == numberPages)\n            next.setAttribute('disabled', 'disabled');\n        else\n            next.removeAttribute('disabled');\n        if (currentPage == 1)\n            prev.setAttribute('disabled', 'disabled');\n        else\n            prev.removeAttribute('disabled');\n        // Update the item count text\n        let startPoint = currentPage == 1 ? 1 : ((currentPage - 1) * show) + 1;\n        let endPoint = currentPage == 1 ? show : ((currentPage) * show);\n        itemCount.innerHTML = `${startPoint} - ${endPoint > total ? total : endPoint} of ${total} items`;\n        const defaultValues = [15, 25, 40, 50];\n        // Update the per page options if needed\n        if (increment && perPage.value != increment && !defaultValues.includes(increment)) {\n            perPage.innerHTML = `<option value=\"${increment}\">${increment}</option>\r\n      <option value=\"${increment * 2}\">${increment * 2}</option>\r\n      <option value=\"${increment * 3}\">${increment * 3}</option>\r\n      <option value=\"${increment * 4}\">${increment * 4}</option>`;\n        }\n        perPage.value = increment;\n    }\n    static get observedAttributes() {\n        return [\"data-total\", \"data-increment\", \"data-page\", \"data-show\"];\n    }\n    attributeChangedCallback(attrName, oldVal, newVal) {\n        switch (attrName) {\n            case \"data-total\": {\n                if (oldVal != newVal) {\n                    this.setAttribute('data-page', 1);\n                    this.setup();\n                }\n                break;\n            }\n            case \"data-show\": {\n                if (oldVal != newVal) {\n                    this.setAttribute('data-page', 1);\n                    this.setup();\n                    this.dispatchEvent(new CustomEvent('update-show', { detail: { show: newVal } }));\n                }\n                break;\n            }\n            case \"data-increment\": {\n                if (oldVal != newVal) {\n                    this.setAttribute('data-show', newVal);\n                    this.setAttribute('data-page', 1);\n                    this.setup();\n                    this.dispatchEvent(new CustomEvent('update-show', { detail: { show: newVal } }));\n                }\n                break;\n            }\n            case \"data-page\": {\n                if (oldVal && oldVal != newVal) {\n                    this.setup();\n                    // Dispact the event for other components to use as triggers \n                    this.dispatchEvent(new CustomEvent('update-page', { detail: { page: newVal } }));\n                }\n                break;\n            }\n        }\n    }\n}\nexport default iamPagination;\n"],"names":["iamPagination","assetLocation","coreCSS","template","params","select","prev","next","perPage","loadMore","event","newValue","wrapper","itemCount","totalPages","currentPage","total","show","increment","numberPages","strOptions","i","startPoint","endPoint","defaultValues","attrName","oldVal","newVal"],"mappings":"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"}